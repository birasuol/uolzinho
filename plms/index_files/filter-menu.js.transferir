function deferFilterjQuery(){if(window.jQuery){var $=window.jQuery;$(function(){var pt_on_load=function(){$(".pt-display-search").not(".has_group_selected").find("input.fm-search-box").show(),$(".pt-display-dropdown").each(function(index){$(this).find("h4").after($(this).find(".filter-clear"))}),$(".pt-display-dropdown .scroll-content").each(function(index){if($(this).parent().find(".menu-trigger").length===0)if($(this).find("li.selected").length){var selected=$.map($(this).find("li.selected a"),function(element){return $(element).text()}).join(", ");selected.length<30?$(this).before('<div class="menu-trigger">'+selected+"</div>"):$(this).before('<div class="menu-trigger">'+$(this).find("li.selected").length+" Selected </div>")}else $(this).before('<div class="menu-trigger">'+$(this).closest(".filter-group").find("h4").text()+"</div>")}),$(".filter-menu li a").attr("title",function(){return($(this).closest("li").hasClass("selected")?"Clear filter: ":"Add filter: ")+$(this).text()});var splitPath=function(url){var splitUrl=url.split("?")[0].split("#")[0].split("/");return splitUrl},getCollection=function(url){var splitUrl=splitPath(url);return splitUrl[2]},getTags=function(url){var splitUrl=splitPath(url);return(splitUrl[3]||"").split("+")},getCommonCollection=function(url_top,url_nested){var collection_top=getCollection(url_top),collection_nested=getCollection(url_nested);return collection_top!==collection_nested?"all":collection_top},getCommonTags=function(url_top,url_nested){var tags_top=getTags(url_top),tags_nested=getTags(url_nested);return tags_top.filter(function(n){return tags_nested.indexOf(n)>-1})},getCommonUrl=function(url_top,url_nested){var val="/collections/"+getCommonCollection(url_top,url_nested)+"/"+getCommonTags(url_top,url_nested).join("+"),lastChar=val.slice(-1);return lastChar=="/"&&(val=val.slice(0,-1)),val},clearNestedParent=$(".pt-display-nested").prev().each(function(){var clearNested=$(this).next().find("a.filter-clear").attr("href");if(clearNested){var clearLink=$(this).find("a.filter-clear");clearLink.attr("href",getCommonUrl(clearLink.attr("href"),clearNested));var filterLinks=$(this).find("li.selected .collection-name a").each(function(){$(this).attr("href",getCommonUrl($(this).attr("href"),clearNested))})}})};pt_on_load(),$(document).on("keyup",".filter-group input.fm-search-box",function(){var value=this.value.toLowerCase();$(this).closest(".filter-group").find("li").each(function(){$(this).text().toLowerCase().search(value)>-1?$(this).show(100):$(this).hide(100)})}),$(document).on("click",".pt-display-dropdown .menu-trigger",function(){$(this).next(".scroll-content").css("top",$(this).position().top+$(this).height()+1).css("left",$(this).position().left),$(this).next(".scroll-content").slideToggle("fast")}),$(document).on("mouseleave",".pt-display-dropdown .scroll-content",function(){$(this).slideUp("fast")}),$.getScript("//bikevillage.com.br/cdn/shop/t/19/assets/jquery.pjax.js?v=138580039773092267901580042659").done(function(script,textStatus){$body=$("body"),$(document).pjax("#main .filter-group a, #main .pagination a","#main",{fragment:"#main",timeout:1e4,scrollTo:!1,push:!0}),$(document).on("pjax:start",function(){$body.addClass("pt-ajax-loading"),$("#main").fadeTo("slow",.8)}),$(document).on("pjax:end",function(){$body.removeClass("pt-ajax-loading"),$("#main").fadeTo("fast",1),pt_on_load()})})})}else setTimeout(function(){deferFilterjQuery()},50)}deferFilterjQuery();
//# sourceMappingURL=/cdn/shop/t/19/assets/filter-menu.js.map?v=99218887432682617361696247674
